# nap-serv

_Not Another Program_ â€” Project Costing & Profitability Server

[![npm version](https://img.shields.io/npm/v/nap-serv.svg)](https://www.npmjs.com/package/nap-serv)
[![build status](https://img.shields.io/github/actions/workflow/status/your-username/pg-schemata/ci.yml?branch=main)](https://github.com/your-username/nap-serv/actions)
[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![node](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen)](https://nodejs.org/)
[![postgresql](https://img.shields.io/badge/PostgreSQL-âœ”ï¸-blue)](https://www.postgresql.org/)
[![node](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen)](https://nodejs.org/)
[![Coverage Status](https://coveralls.io/repos/github/your-org/nap-serv/badge.svg?branch=main)](https://coveralls.io/github/your-org/nap-serv?branch=main)
[![Docs](https://img.shields.io/badge/docs-online-brightgreen)](https://your-org.github.io/nap-serv/)

---

## Overview

`nap-serv` is the backend server for a PERN-stack project-based cost management platform. It supports multi-tenant operations, project budgeting vs. actual cost tracking, double-entry accounting, and centralized user authentication via `nap_users`.

Dynamic route loading was deprecated in favor of static registration to support ESM testing with Jest.

## Features

- ğŸ§‘â€ğŸ’¼ Multi-tenant architecture with per-tenant PostgreSQL schemas
- ğŸ” Centralized authentication with JWT/session and `nap_users` table
- ğŸ“Š Project-level budgeting, costing, and profitability tracking
- ğŸ› ï¸ Activity-based cost rollups and actual vs. budget comparisons
- ğŸ’° Double-entry bookkeeping system:
  - General Ledger
  - Accounts Payable / Receivable
- ğŸ“† Schedule management and billing cycle integration
- ğŸ“¦ Static route registration (ESM- and Jest-compatible; dynamic loading deprecated)
- ğŸ§  Planned: AI-powered reporting and cost estimation tools

## Tech Stack

- **Backend:** Node.js (ESM), Express
- **Database:** PostgreSQL
- **Frontend:** [nap-client](https://github.com/your-org/nap-client)
- **ORM Layer:** [`pg-schemata`](https://www.npmjs.com/package/pg-schemata) â€“ schema-driven PostgreSQL wrapper with static module integration

## Monorepo Structure

```plaintext
nap/
â”œâ”€â”€ nap-server/         # Backend API (this repo)
â”œâ”€â”€ nap-client/         # React frontend
â””â”€â”€ nap-common/         # Shared utilities, types, etc.
```

## Getting Started

```bash
git clone https://github.com/your-org/nap-serv.git
cd nap-serv
npm install
npm run dev
```

## Scripts

- `npm run dev` â€“ Start server in dev mode
- `npm run test` â€“ Run unit and integration tests
- `npm run lint` â€“ Lint the codebase
- `npm run docs` â€“ Generate JSDoc documentation to `docs/`

## Documentation

Autogenerated using [JSDoc](https://jsdoc.app) + [docdash](https://github.com/clenemt/docdash)

```bash
npm run docs
```

Documentation is published at:  
ğŸ‘‰ [https://your-org.github.io/nap-serv](https://your-org.github.io/nap-serv)

## License

MIT Â© 2025 Ian Silverstone

# ğŸš€ Contributions Welcome

Feel free to open issues, suggest features, or submit pull requests!
