# nap-serv

_Not Another Program_ — Project Costing & Profitability Server

[![npm version](https://img.shields.io/npm/v/nap-serv.svg)](https://www.npmjs.com/package/nap-serv)
[![build status](https://img.shields.io/github/actions/workflow/status/your-username/pg-schemata/ci.yml?branch=main)](https://github.com/your-username/nap-serv/actions)
[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![node](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen)](https://nodejs.org/)
[![postgresql](https://img.shields.io/badge/PostgreSQL-✔️-blue)](https://www.postgresql.org/)
[![node](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen)](https://nodejs.org/)
[![Coverage Status](https://coveralls.io/repos/github/your-org/nap-serv/badge.svg?branch=main)](https://coveralls.io/github/your-org/nap-serv?branch=main)
[![Docs](https://img.shields.io/badge/docs-online-brightgreen)](https://your-org.github.io/nap-serv/)

---

## Overview

`nap-serv` is the backend server for a PERN-stack project-based cost management platform. It supports multi-tenant operations, project budgeting vs. actual cost tracking, double-entry accounting, and centralized user authentication via `nap_users`.

Dynamic route loading was deprecated in favor of static registration to support ESM testing with Jest.

## Features

- 🧑‍💼 Multi-tenant architecture with per-tenant PostgreSQL schemas
- 🔐 Centralized authentication with JWT/session and `nap_users` table
- 📊 Project-level budgeting, costing, and profitability tracking
- 🛠️ Activity-based cost rollups and actual vs. budget comparisons
- 💰 Double-entry bookkeeping system:
  - General Ledger
  - Accounts Payable / Receivable
- 📆 Schedule management and billing cycle integration
- 📦 Static route registration (ESM- and Jest-compatible; dynamic loading deprecated)
- 🧠 Planned: AI-powered reporting and cost estimation tools

## Tech Stack

- **Backend:** Node.js (ESM), Express
- **Database:** PostgreSQL
- **Frontend:** [nap-client](https://github.com/your-org/nap-client)
- **ORM Layer:** [`pg-schemata`](https://www.npmjs.com/package/pg-schemata) – schema-driven PostgreSQL wrapper with static module integration

## Monorepo Structure

```plaintext
nap/
├── nap-server/         # Backend API (this repo)
├── nap-client/         # React frontend
└── nap-common/         # Shared utilities, types, etc.
```

## Getting Started

```bash
git clone https://github.com/your-org/nap-serv.git
cd nap-serv
npm install
npm run dev
```

## Scripts

- `npm run dev` – Start server in dev mode
- `npm run test` – Run unit and integration tests
- `npm run lint` – Lint the codebase
- `npm run docs` – Generate JSDoc documentation to `docs/`

## Documentation

Autogenerated using [JSDoc](https://jsdoc.app) + [docdash](https://github.com/clenemt/docdash)

```bash
npm run docs
```

Documentation is published at:  
👉 [https://your-org.github.io/nap-serv](https://your-org.github.io/nap-serv)

## License

MIT © 2025 Ian Silverstone

# 🚀 Contributions Welcome

Feel free to open issues, suggest features, or submit pull requests!
